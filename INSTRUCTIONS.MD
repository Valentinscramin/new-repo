# instructions.md

Projeto: **TechCompare â€“ Comparador Gamer & Office para NÃ´mades Digitais**
Stack: **Symfony 7 + Vue 3 + MongoDB + OpenAI (ChatGPT API)**

---

## 1. VisÃ£o Geral do Projeto

O **TechCompare** Ã© um comparador inteligente de produtos focado em:

* ğŸ® Mundo Tech Gamer
* ğŸ’» Equipamentos para escritÃ³rio
* ğŸŒ NÃ´mades digitais

O sistema permite que o usuÃ¡rio:

1. Insira **3 links de produtos**
2. O sistema:

   * Carrega o HTML em background
   * Salva temporariamente
   * Envia o conteÃºdo para o ChatGPT
   * Extrai informaÃ§Ãµes tÃ©cnicas estruturadas
3. Gera uma **tabela de comparaÃ§Ã£o inteligente**
4. Calcula um **Score de Custo-BenefÃ­cio**
5. Destaca claramente o **produto vencedor**
6. Permite login/registro
7. MantÃ©m histÃ³rico de comparaÃ§Ãµes no dashboard

---

# 2. Arquitetura Geral

## Backend

* Symfony 7
* API REST
* JWT Authentication
* MongoDB (Doctrine MongoDB ODM)
* ServiÃ§o de integraÃ§Ã£o com OpenAI
* Processamento assÃ­ncrono (Messenger + Worker)

## Frontend

* Vue 3 (Composition API)
* Vue Router
* Pinia (state management)
* Axios
* TailwindCSS (tema escuro estilo Netflix gamer)

## Banco de Dados

* MongoDB
* Collections:

  * users
  * comparisons
  * products

---

# 3. Estrutura de PÃ¡ginas (Apenas 2 PÃºblicas + Auth + Dashboard)

## 3.1 Landing Page (Home)

Estilo:

* Dark mode
* Layout estilo Netflix
* Hero com call-to-action
* Foco gamer + minimalista tech

### SeÃ§Ãµes:

1. Hero

   * TÃ­tulo forte:

     > "Compare. Analise. Escolha o Melhor Setup."
   * Subtitulo:

     > Comparador inteligente para gamers e nÃ´mades digitais.
   * BotÃ£o:

     * **"ComeÃ§ar Agora"**
     * Redireciona para registro se nÃ£o logado

2. FormulÃ¡rio de ComparaÃ§Ã£o

   * 3 campos de input:

     * Link Produto 1
     * Link Produto 2
     * Link Produto 3
   * BotÃ£o: "Comparar Agora"

3. Call to Action

   * "Crie sua conta e salve suas comparaÃ§Ãµes"
   * BotÃ£o: Registrar

---

## 3.2 PÃ¡gina de Resultado da ComparaÃ§Ã£o

Mostra:

### Tabela de ComparaÃ§Ã£o

Colunas:

* Produto 1
* Produto 2
* Produto 3

Linhas:

* Marca
* Modelo
* PreÃ§o
* Processador
* GPU
* RAM
* Armazenamento
* Tela
* Peso
* Autonomia de bateria
* Conectividade
* AvaliaÃ§Ã£o geral
* Score Custo-BenefÃ­cio

---

### Destaque do Vencedor

* Card destacado
* Glow verde
* Badge:

  > ğŸ† Melhor Escolha

ExplicaÃ§Ã£o textual:

"Baseado em performance, preÃ§o e especificaÃ§Ãµes tÃ©cnicas, este produto oferece o melhor equilÃ­brio entre custo e benefÃ­cio."

---

# 4. Fluxo TÃ©cnico da ComparaÃ§Ã£o

## 4.1 Processo Backend

1. UsuÃ¡rio envia 3 URLs
2. Backend:

   * Valida URLs
   * Cria documento de comparaÃ§Ã£o com status: "processing"
   * Dispara Job assÃ­ncrono

---

## 4.2 Worker de Processamento

Para cada URL:

### Passo 1 â€“ Download do HTML

* Usar Symfony HttpClient
* Salvar temporariamente em `/var/tmp/products`

### Passo 2 â€“ Limpeza do HTML

* Remover scripts
* Extrair conteÃºdo principal
* Limitar tamanho de tokens

### Passo 3 â€“ Envio para OpenAI

Prompt para extraÃ§Ã£o:

```text
VocÃª Ã© um especialista em hardware gamer e equipamentos para nÃ´mades digitais.

Extraia as seguintes informaÃ§Ãµes do produto:

- Nome do Produto
- Marca
- Modelo
- PreÃ§o (moeda e valor)
- Categoria (notebook, monitor, teclado, etc.)
- EspecificaÃ§Ãµes tÃ©cnicas completas
- Pontos fortes
- Pontos fracos
- PÃºblico ideal

Retorne em JSON estruturado.
```

---

## 4.3 CÃ¡lculo do Score

Criar algoritmo interno:

### FÃ³rmula Base:

```
Score = (Performance * PesoPerformance)
      + (QualidadeConstrucao * PesoQualidade)
      + (Mobilidade * PesoMobilidade)
      - (PrecoNormalizado * PesoPreco)
```

CritÃ©rios:

### Gamer:

* GPU
* CPU
* RAM
* Refresh Rate

### NÃ´made Digital:

* Peso
* Bateria
* Portabilidade
* Conectividade

Normalizar preÃ§o entre os 3 produtos.

Score final entre 0 e 100.

Produto com maior score:

* Flag winner = true

---

# 5. Estrutura MongoDB

## User

```json
{
  "_id": ObjectId,
  "email": "string",
  "password": "hashed",
  "createdAt": ISODate
}
```

---

## Comparison

```json
{
  "_id": ObjectId,
  "userId": ObjectId,
  "products": [ProductReference],
  "winnerProductId": ObjectId,
  "status": "processing | completed",
  "createdAt": ISODate
}
```

---

## Product

```json
{
  "_id": ObjectId,
  "comparisonId": ObjectId,
  "name": "string",
  "brand": "string",
  "price": number,
  "currency": "string",
  "specs": {},
  "strengths": [],
  "weaknesses": [],
  "score": number,
  "rawExtraction": {}
}
```

---

# 6. Sistema de AutenticaÃ§Ã£o

## Registro

* Email Ãºnico
* Senha hash (Symfony PasswordHasher)
* ApÃ³s registro:

  * Login automÃ¡tico
  * Redireciona para Dashboard

## Login

* JWT Token
* Armazenado no localStorage
* Axios interceptor

---

# 7. Dashboard

ApÃ³s login:

Mostra:

* Lista de comparaÃ§Ãµes
* Status
* Data
* BotÃ£o "Ver Detalhes"

Ao clicar:

* Abre pÃ¡gina de comparaÃ§Ã£o completa

---

# 8. Frontend Vue 3 Estrutura

```
src/
  views/
    Home.vue
    CompareResult.vue
    Login.vue
    Register.vue
    Dashboard.vue
  components/
    ProductInput.vue
    ComparisonTable.vue
    WinnerCard.vue
```

---

# 9. Requisitos de UI/UX

Tema:

* Fundo preto (#0f0f0f)
* Cards cinza escuro
* Verde neon para destaque
* Tipografia moderna
* Layout responsivo

SensaÃ§Ã£o:

* Plataforma gamer premium
* Minimalista
* RÃ¡pida

---

# 10. SeguranÃ§a

* Sanitizar HTML
* Limitar tamanho de input
* Rate limit na API
* Validar URLs
* ProteÃ§Ã£o contra XSS

---

# 11. Extras Importantes

* Mostrar loading animado:

  > "Analisando hardware e performance..."

* Caso ChatGPT falhe:

  * Status = failed
  * Permitir retry

---

# 12. Resultado Esperado

Sistema completo com:

âœ” Landing estilo Netflix
âœ” ComparaÃ§Ã£o inteligente
âœ” Score automatizado
âœ” Vencedor destacado claramente
âœ” Registro/Login
âœ” Dashboard com histÃ³rico
âœ” Processamento assÃ­ncrono
âœ” MongoDB estruturado
âœ” IntegraÃ§Ã£o com ChatGPT

---

# Objetivo Final

Criar um comparador premium para:

ğŸ® Gamers exigentes
ğŸ’¼ Profissionais remotos
ğŸŒ NÃ´mades digitais

Foco total em **melhor custo-benefÃ­cio com inteligÃªncia artificial**.
